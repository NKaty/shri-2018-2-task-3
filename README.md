# Задание 3 — реализовать алгоритм работы «умного дома»

1. Задача сделана в node js. Для удобства входные данные в виде json вынесены в отдельный файл и подключены через require. В связи с этим использован try/catch для парсинга json (так как при подключении через require парсить не нужно). Так как из пояснительного видео следует, что функция получения расписания электрических приборов будет использована внутри реализации приложения умного дома, и входные данные будут проверены на уровене выше, дополнительные проверки для входных данных не делались.
2. Логика рассуждений при решении задачи была следующей. Сначала расставить приборы, которые работают 24 часа, так как тут вариантов быть не может. Одновременно с расстановкой следующего прибора проверять не превышает ли общая мощность уже расставленных приборов максимально допустимую в час. Если превышает - выбросить сообщение об ошибке. Если ошибки не возникло, перейти к расстановке остальных приборов. Здесь очевидным решением могли бы быть сортировка приборов по мощности, поиск возможных вариантов, расчет стоимости каждого варианта и выбор варианта с минимальной стоимостью. Но здесь возникают проблемы: 1) Приборы без mode свойства (т.е. с возможностью работы в любой период суток) могут быть мощнее и полностью займут дешевое ночное время, так что время для работы ночных приборов уже не останется. 2) Даже если проблема 1 не возникнет, при большом количестве приборов, выбирая каждый раз вариант с минимальной стоимостью, можно заполнить расписание таким образом, что между часами работы приборов будут пустые промежутками, и хотя по суммарному количеству оставшихся свободных часов вставить в расписание новый прибор теоретически возможно, но на практике нет - так как участка с нужной непрерывной продолжительностью нет. Решение двух этих проблем - найти все возможные варианты расстановки приборов и выбрать вариант с минимальной стоимостью. Если вариантов нет (общая мощность приборов в какой-либо час превышает максимально допустимую), выкинуть ошибку.
3. Реализация. Главная идея - представить все возможные варианты расписаний в виде древа. В вершине дерева находится расписание с уже добавленными круглосуточно работающими приборами. Каждый последующий уровень дерева - все возможные варианты добавления одно прибора из оставшихся. Какие-то ветки дерева доходят до конца (до последнего прибора), какие-то заходят в тупик и обрываются. Последний уровень дерева (если хоть одна ветка дошла до последнего прибора) - все возможные решения, из которых надо выбрать минимальные затраты на электроэнергию. Реализация данной концепции начата с разделения приборов на 2 группы: в первой группе - приборы работающие круглосуточно, во второй - все остальные. Приборы из второй группы разделины на 3 группы: ночь, день, без режима. Затем каждая группа отсортирована в порядке убывания продолжительности работы. И в завершении все три группы слиты в одну в порядке возрастания возможной продолжительности периода (в заданном в задаче случае: ночь (10 часов), день (14 часов), без режима (24 часа)). Такая сортировка направленна на уменьшение количества вариантов для расчета, т.е. уменьшение времени, необходимого для расчетов. 
